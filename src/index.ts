import axios from 'axios';
import dotenv from 'dotenv';
let access_token;
dotenv.config();
//@ts-ignore
const getAccessToken = () => {
    return axios
        .get('https://aip.baidubce.com/oauth/2.0/token', {
            params: {
                grant_type: 'client_credentials',
                client_id: process.env.CLIENT_ID,
                client_secret: process.env.CLIENT_SECRET
            }
        })
        .then(res => {
            return res.data.access_token;
            // console.log(access_token);
        });
};

const getNewsSummary = body => {
    return axios({
        method: 'POST',
        url: 'https://aip.baidubce.com/rpc/2.0/nlp/v1/news_summary',
        params: {
            access_token,
            charset: 'UTF-8'
        },
        data: body,
        headers: {
            'Content-Type': 'application/json'
        }
    }).then(res => {
        // console.log('getNewsSummary', res);
        return res.data;
    });
};

const getEmotion = body => {
    return axios({
        method: 'POST',
        url: 'https://aip.baidubce.com/rpc/2.0/nlp/v1/emotion',
        params: {
            access_token,
            charset: 'UTF-8'
        },
        data: body,
        headers: {
            'Content-Type': 'application/json'
        }
    }).then(res => {
        // console.log('getNewsSummary', res);
        return res.data;
    });
};

const main = async () => {
    access_token = await getAccessToken();
    const body = {
        title:
            'åŽä¸ºå‘å¸ƒå…¨çƒæœ€å¿«AIè®­ç»ƒé›†ç¾¤Atlas 900ï¼šç®—åŠ›é«˜è¾¾50ä¸‡å°PCï¼Œé¢†å…ˆç¬¬äºŒå10ç§’',
        content: `åŽä¸ºå‘å¸ƒå…¨çƒæœ€å¿«AIè®­ç»ƒé›†ç¾¤Atlas 900ï¼šç®—åŠ›é«˜è¾¾50ä¸‡å°PCï¼Œé¢†å…ˆç¬¬äºŒå10ç§’
            åŽŸåˆ›ï¼š é™ˆæ€ã€å”å°æ™º InfoQ ä»Šå¤©
            
            
            ä½œè€…ä¸¨é™ˆæ€ã€å°æ™º
            
            åŒ—äº¬æ—¶é—´ 9 æœˆ 18 æ—¥ï¼Œ2019 åŽä¸ºå…¨è”æŽ¥å¤§ä¼šåœ¨ä¸Šæµ·å¼€å¹•ï¼ŒInfoQ ä½œä¸ºå—é‚€åª’ä½“å¯¹æœ¬æ¬¡å¤§ä¼šè¿›è¡ŒæŠ¥é“ã€‚æœ¬æ¬¡å¤§ä¼šä¸Šï¼ŒåŽä¸ºå‰¯è‘£äº‹é•¿èƒ¡åŽšå´‘ä¸ä»…å®Œæ•´å±•ç¤ºäº†åŽä¸ºåœ¨æ™ºèƒ½è®¡ç®—æ—¶ä»£çš„å‘å±•æˆ˜ç•¥ï¼ŒåŒæ—¶è¿˜é‡ç£…å‘å¸ƒäº†ä¸€æ¬¾å…¨çƒæœ€å¿«çš„ AI è®­ç»ƒé›†ç¾¤ï¼šAtlas 900ã€‚
            1
            Atlas 900ï¼šå…¨çƒæœ€å¿«çš„ AI è®­ç»ƒé›†ç¾¤
            åœ¨ 2019 åŽä¸ºå…¨è”æŽ¥å¤§ä¼šçš„çŽ°åœºï¼ŒåŽä¸ºå‰¯è‘£äº‹é•¿èƒ¡åŽšèŽæ­£å¼å‘å¸ƒäº† Atlas 900ã€‚æ®äº†è§£ï¼ŒAtlas 900 æ˜¯å½“å‰å…¨çƒæœ€å¿«çš„ AI è®­ç»ƒé›†ç¾¤ï¼Œå®ƒç”±æ•°åƒé¢—æ˜‡è…¾ 910 AI å¤„ç†å™¨æž„æˆã€‚Atlas 900 é€šè¿‡åŽä¸ºé›†ç¾¤é€šä¿¡åº“å’Œä½œä¸šè°ƒåº¦å¹³å°ï¼Œæ•´åˆ HCCSã€ PCIe 4.0 å’Œ 100G RoCE ä¸‰ç§é«˜é€ŸæŽ¥å£ï¼Œå……åˆ†é‡Šæ”¾æ˜‡è…¾ 910 çš„å¼ºå¤§æ€§èƒ½ã€‚å…¶æ€»ç®—åŠ›è¾¾åˆ° 256-1014 FLOPS @FP16ï¼Œç›¸å½“äºŽ 50 ä¸‡å° PC çš„è®¡ç®—èƒ½åŠ›ã€‚
            
            
            
            å½“å‰åŽä¸ºå·²åœ¨åŽä¸ºäº‘ä¸Šéƒ¨ç½²ä¸€ä¸ª Atlas 900 é›†ç¾¤ï¼Œåªéœ€ 59.8 ç§’å°±å¯ä»¥å®Œæˆå…¸åž‹ç½‘ç»œçš„è®­ç»ƒï¼Œæ¯”ç¬¬äºŒåå¿«äº† 10 ç§’ã€‚å¯¹æ­¤èƒ¡åŽšèŽåšäº†ä¸€ä¸ªå½¢è±¡çš„æ¯”å–»ï¼šè¿™ç›¸å½“äºŽç¬¬ä¸€åå‡ºçº¿ä»¥åŽï¼Œå–äº†ä¸€ç“¶æ°´ï¼Œç¬¬äºŒåæ‰å‡ºçº¿ã€‚æœ¬æ¬¡æµ‹è¯•åŸºäºŽâ€œResNet-50 v1.5 æ¨¡åž‹â€å’Œâ€œ ImageNet-1k æ•°æ®é›†â€ã€‚
            
            
            
            é™¤äº†åŸºç¡€ç¡¬ä»¶ï¼ŒåŽä¸ºåŸºäºŽ Atlas 900 è¿˜æä¾›åŽä¸ºäº‘ EI é›†ç¾¤æœåŠ¡ï¼Œé‡‡ç”¨ä»Žåº•å±‚ç¡¬ä»¶åˆ°å¼€å‘æž¶æž„çš„å…¨æ ˆä¼˜åŒ–ï¼Œæä¾›ä¸–ç•Œé¡¶çº§çš„å¼ºåŠ²ç®—åŠ›ã€‚
            
            æ®äº†è§£ï¼ŒAtlas 900 å¯å¹¿æ³›åº”ç”¨äºŽç§‘å­¦ç ”ç©¶ä¸Žå•†ä¸šåˆ›æ–°ï¼Œè®©ç ”ç©¶äººå‘˜æ›´å¿«çš„è¿›è¡Œå›¾åƒã€è¯­éŸ³ç­‰ AI æ¨¡åž‹è®­ç»ƒï¼Œè®©äººç±»æ›´é«˜æ•ˆçš„æŽ¢ç´¢å®‡å®™å¥¥ç§˜ã€é¢„æµ‹å¤©æ°”ã€å‹˜æŽ¢çŸ³æ²¹ï¼ŒåŠ é€Ÿè‡ªåŠ¨é©¾é©¶çš„å•†ç”¨è¿›ç¨‹ã€‚
            
            2
            åŽä¸ºæŠ«éœ²æ™ºèƒ½è®¡ç®—å…¨æˆ˜ç•¥
            ä¸¤å¹´å‰ï¼ŒåŽä¸ºå‘å¸ƒäº†æ–°çš„æ„¿æ™¯ä½¿å‘½ï¼Œå°±æ˜¯è¦â€œæŠŠæ•°å­—ä¸–ç•Œå¸¦å…¥æ¯ä¸ªäººã€æ¯ä¸ªå®¶åº­ã€æ¯ä¸ªç»„ç»‡ï¼Œæž„å»ºä¸‡ç‰©äº’è”çš„æ™ºèƒ½ä¸–ç•Œâ€ã€‚æ¯å¹´çš„åŽä¸ºå…¨è”æŽ¥å¤§ä¼šéƒ½æ˜¯åŽä¸ºçš„ä¸€æ¬¡ç­”è¾©ä¼šï¼Œè¿™æ¬¡å¤§ä¼šçŽ°åœºèƒ¡åŽšå´‘é¦–æ¬¡æŠ«éœ²äº†åŽä¸ºçš„æ™ºèƒ½è®¡ç®—å…¨æˆ˜ç•¥ã€‚
            
            åŽä¸ºè®¤ä¸ºæ™ºèƒ½ä¸–ç•Œæœ‰ä¸‰ä¸ªç‰¹å¾ï¼Œå°±æ˜¯ä¸‡ç‰©æ„ŸçŸ¥ã€ä¸‡ç‰©äº’è”ã€ä¸‡ç‰©æ™ºèƒ½ï¼Œè¦æ”¯æ’‘è¿™æ ·ä¸€ä¸ªæ™ºèƒ½ä¸–ç•Œï¼Œæœ‰ä¸¤ä¸ªå…³é”®çš„æŠ€æœ¯éœ€è¦æŒç»­åˆ›æ–°å’ŒæŠ•èµ„ï¼šè”æŽ¥å’Œè®¡ç®—ã€‚è”æŽ¥å’Œè®¡ç®—æ˜¯ä¸€å¯¹å­ªç”Ÿå…„å¼Ÿï¼Œåœ¨å½“ä»Šçš„ä¸–ç•Œé‡Œï¼Œå“ªé‡Œæœ‰è”æŽ¥ï¼Œå“ªé‡Œå°±æœ‰è®¡ç®—ã€‚åä¹‹äº¦ç„¶ã€‚èƒ¡åŽšå´‘è°ˆåˆ°ï¼Œè¿‡åŽ»åŽä¸ºå¯¹è”æŽ¥è°ˆå¾—æ¯”è¾ƒå¤šï¼Œä½†å…¶å®žåŽä¸ºå¯¹è®¡ç®—çš„æŠ•èµ„å·²æœ‰åå¹´ï¼Œä»Šå¤©é‡ç‚¹å‘å¤§å®¶åˆ†äº«ä¸€ä¸‹åŽä¸ºåœ¨è®¡ç®—æ–¹é¢çš„æ´žå¯Ÿä¸Žæˆ˜ç•¥ã€‚
            
             å¯¹è®¡ç®—äº§ä¸šçš„è§‚å¯Ÿ
            è®¡ç®—æˆä¸ºäººç±»èƒ½åŠ›çš„å»¶ä¼¸ï¼š70 å¤šå¹´çš„å‘å±•ï¼Œè®¡ç®—æœºä½“ç§¯è¶Šæ¥è¶Šå°ï¼Œæ€§èƒ½è¶Šæ¥è¶Šå¼ºï¼Œäººæœºè·ç¦»è¶Šæ¥è¶Šè¿‘ï¼Œå·²ç»æˆä¸ºäººç±»èƒ½åŠ›çš„ä¸€ç§å»¶ä¼¸ï¼›
            
            è®¡ç®—æ¨¡å¼ä¸æ–­æ¼”è¿›ï¼šä»ŽåŸºäºŽè§„åˆ™åˆ°åŸºäºŽç»Ÿè®¡ï¼Œè§£å†³äº†è®¸å¤š AI é—®é¢˜ï¼›
            
            è®¡ç®—è¿›å…¥æ™ºèƒ½æ—¶ä»£ï¼šè¶…å¼ºç®—åŠ›ã€è®¡ç®—æ— å¤„ä¸åœ¨ã€ç«¯è¾¹äº‘ååŒï¼Œå°†æ˜¯æ™ºèƒ½æ—¶ä»£çš„ä¸‰å¤§ç‰¹å¾ã€‚
            
            èƒ¡åŽšå´‘è¡¨ç¤ºï¼ŒåŸºäºŽ Gartner çš„æ•°æ®ï¼Œé¢„è®¡åˆ° 2023 å¹´ï¼Œè®¡ç®—äº§ä¸šçš„è§„æ¨¡å°†è¶…è¿‡ 2 ä¸‡äº¿ç¾Žå…ƒã€‚æŒ‘æˆ˜è¶Šå¤§ï¼Œæœºä¼šä¹Ÿå°±è¶Šå¤§ã€‚
            
             åŽä¸ºè®¡ç®—äº§ä¸šæˆ˜ç•¥
            åŽä¸ºä¸»è¦ä»Žå››ä¸ªæ–¹é¢å¸ƒå±€è®¡ç®—äº§ä¸šï¼ŒåŒ…æ‹¬å¯¹æž¶æž„åˆ›æ–°çš„çªç ´ã€å¯¹å…¨åœºæ™¯å¤„ç†å™¨å®¶æ—çš„æŠ•èµ„ï¼ŒåšæŒæœ‰æ‰€ä¸ºæœ‰æ‰€ä¸ä¸ºçš„å•†ä¸šç­–ç•¥ï¼Œä»¥åŠä¸é—ä½™åŠ›åœ°æž„å»ºå¼€æ”¾ç”Ÿæ€ã€‚
            
            æž¶æž„åˆ›æ–°ï¼šäº§ä¸šç•Œç®—åŠ›ç¨€ç¼ºï¼Œæ‘©å°”å®šå¾‹æŽ¥è¿‘æžé™ï¼Œå¤„ç†å™¨æž¶æž„éœ€è¦åŒ¹é…ç®—åŠ›å¢žé€Ÿã€‚åŸºäºŽæ­¤ï¼ŒåŽä¸ºæŽ¨å‡ºè¾¾èŠ¬å¥‡æž¶æž„ï¼Œè¿™æ˜¯ä¸šç•Œå”¯ä¸€èƒ½å¤Ÿè¦†ç›–â€œç«¯ã€è¾¹ã€äº‘â€å…¨åœºæ™¯çš„å¤„ç†å™¨æž¶æž„ã€‚
            
            æŠ•èµ„å…¨åœºæ™¯å¤„ç†å™¨å®¶æ—ï¼šåŽä¸ºå·²ç»å‘å¸ƒäº†å¤šä¸ªç³»åˆ—çš„å¤„ç†å™¨ã€‚å…·ä½“åŒ…æ‹¬æ”¯æŒé€šç”¨è®¡ç®—çš„é²²é¹ç³»åˆ—ï¼Œæ”¯æŒ AI çš„æ˜‡è…¾ç³»åˆ—ï¼Œæ”¯æŒæ™ºèƒ½ç»ˆç«¯çš„éº’éºŸç³»åˆ—ï¼Œä»¥åŠæ”¯æŒæ™ºæ…§å±çš„é¸¿é¹„ç³»åˆ—ã€‚æœªæ¥å¯¹äºŽå¤„ç†å™¨çš„æŠ•èµ„è¿˜å°†ç»§ç»­ã€‚
            
            å•†ä¸šç­–ç•¥ï¼šä¸ç›´æŽ¥å¯¹å¤–é”€å”®å¤„ç†å™¨ï¼Œä»¥äº‘æœåŠ¡é¢å‘å®¢æˆ·ï¼Œä»¥éƒ¨ä»¶ä¸ºä¸»é¢å‘åˆä½œä¼™ä¼´ï¼Œä¼˜å…ˆæ”¯æŒåˆä½œä¼™ä¼´å‘å±•æ•´æœºã€‚é€šè¿‡ç¡¬ä»¶å¼€æ”¾ã€è½¯ä»¶å¼€æºã€ä½¿èƒ½åº”ç”¨å¼€å‘å’Œè¿ç§»è¿™ä¸‰å¤§æ­¥ï¼Œå®žçŽ°å…±èµ¢ã€‚
            
            æž„å»ºå¼€æ”¾ç”Ÿæ€ï¼š4 å¹´å‰å‘å¸ƒçš„æ²ƒåœŸè®¡åˆ’å·²ç»å­µåŒ–äº†è¶…è¿‡ 130 ä¸‡å¼€å‘è€…å’Œ 14000 å¤šå®¶ ISVï¼Œä»ŠåŽå°†æŠ•å…¥ 15 äº¿ç¾Žå…ƒå…¨é¢å‡çº§ã€‚
            
             å¤„ç†å™¨ï¼Œå…¨é¢è½åœ°
            åœ¨é€šç”¨è®¡ç®—é¢†åŸŸï¼ŒåŽä¸ºæŠ•èµ„çš„é²²é¹ç³»åˆ—å·²ç»é™†ç»­ä¸Šå¸‚ã€‚åœ¨æ¿å¡ã€æœåŠ¡å™¨ã€æ“ä½œç³»ç»Ÿã€æ•°æ®åº“ã€ç¼–è¯‘å™¨ç­‰å…³é”®æŠ€æœ¯å’Œé¢†åŸŸä¹Ÿåœ¨æŒç»­æŠ•èµ„ï¼Œä»¥æ‰“é€ ä¸€ä¸ªä¾æ‰˜äºŽé²²é¹å¤„ç†å™¨çš„ç”Ÿæ€é“¾ã€‚åŽä¸ºå·²ç»åŒåŒ—äº¬ã€ä¸Šæµ·ã€æ·±åœ³ç­‰åœ°çš„æ”¿åºœå’Œåˆä½œä¼™ä¼´ä¸€èµ·ï¼Œæ‰“é€ åŸºäºŽé²²é¹çš„ç”Ÿæ€åŸºåœ°ï¼Œä»¥åŸ¹å…»äº§ä¸šäººæ‰ï¼Œå­µåŒ–äº§ä¸šæ ‡å‡†ã€‚
            
            åœ¨ AI è®¡ç®—é¢†åŸŸï¼ŒåŽä¸ºåŽ»å¹´å‘å¸ƒäº†å…¨æ ˆå…¨é“¾è·¯çš„ AI è§£å†³æ–¹æ¡ˆã€‚èƒ¡åŽšå´‘è¡¨ç¤ºï¼Œå½“æ—¶åªäº¤ä»˜äº†ç”¨äºŽæŽ¨ç†çš„æ˜‡è…¾ 310 å¤„ç†å™¨å’Œ ModelArts åº”ç”¨å¼€å‘å¹³å°ï¼Œæ‰€ä»¥ä¸šç•Œå’Œåˆä½œä¼™ä¼´å¯¹å…¶èƒ½åŠ›å­˜ç–‘ã€‚ä»Šå¹´ï¼Œç”¨äºŽè®­ç»ƒçš„æ˜‡è…¾å¤„ç†å™¨å’Œ AI è®¡ç®—æ¡†æž¶ MindSpore ä¹Ÿå·²æ­£å¼å‘å¸ƒï¼Œè¯¥è§£å†³æ–¹æ¡ˆå·²å…¨é¢è½åœ°ã€‚
            
            3
            Atlas å®¶æ—ä¸€å¹´è®°
            Atlas é¦–æ¬¡äº®ç›¸æ˜¯åœ¨ä¸€å¹´å‰çš„å…¨è”æŽ¥å¤§ä¼šä¸Šï¼Œå®ƒæ˜¯ 2017 å¹´å‘å¸ƒçš„ Atlas æ™ºèƒ½äº‘ç¡¬ä»¶å¹³å°çš„å…¨æ–°æ¼”è¿›ã€‚å½“æ—¶å‘å¸ƒçš„äº§å“åŒ…æ‹¬ï¼šé¢å‘ç«¯ä¾§çš„ Atlas 200 AI åŠ é€Ÿæ¨¡å—ã€é¢å‘æ•°æ®ä¸­å¿ƒä¾§çš„ Atlas 300 AI åŠ é€Ÿå¡ã€é¢å‘è¾¹ç¼˜ä¾§çš„ Atlas 500 æ™ºèƒ½å°ç«™ã€åŠå®šä½äºŽä¼ä¸šé¢†åŸŸä¸€ç«™å¼ AI å¹³å°çš„ Atlas 800 AI ä¸€ä½“æœºã€‚
            
            2019 å¹´ 4 æœˆï¼ŒåŽä¸ºå®£å¸ƒ Atlas äººå·¥æ™ºèƒ½è®¡ç®—å¹³å°ç³»åˆ—äº§å“æ­£å¼ä¸Šå¸‚ï¼Œå¼€å¯äº† Atlas å•†ç”¨æ–°ç¯‡ç« ï¼Œå¹¶åŒæ—¶å‘å¸ƒäº† Atlas 200 AI åŠ é€Ÿæ¨¡å—ã€Atlas 200 DK AI å¼€å‘è€…å¥—ä»¶ã€Atlas 300 AI åŠ é€Ÿå¡ã€Atlas 500 æ™ºèƒ½å°ç«™ç­‰æ–°äº§å“ï¼Œå¯å¹¿æ³›ç”¨äºŽâ€œå¹³å®‰åŸŽå¸‚ã€æ™ºèƒ½äº¤é€šã€æ™ºèƒ½åŒ»ç–—ã€æ™ºèƒ½é›¶å”®ã€æ™ºèƒ½é‡‘èžâ€ç­‰é¢†åŸŸã€‚
            
            ä»Šå¹´çš„å…¨è”æŽ¥å¤§ä¼šä¸Šï¼ŒAtlas 900 çš„èƒ½åŠ›æ›´æ˜¯è®©äººæƒŠå¹ï¼šçŽ°åœºå±•ç¤ºçš„ä¸€å¼ å—åŠçƒçš„æ˜Ÿç©ºå›¾ä¸Šæœ‰ 20 ä¸‡é¢—æ˜Ÿæ˜Ÿï¼Œè¿™æ˜¯æ¥è‡ªäºŽ SKA å°„ç”µæœ›è¿œé•œçš„æ•°æ®ã€‚
            
            
            
            å½“å‰æ¡ä»¶ä¸‹ï¼Œå¤©æ–‡å­¦å®¶è¦ä»Žè¿™ 20 ä¸‡é¢—æ˜Ÿæ˜Ÿä¸­ï¼Œæ‰¾å‡ºæŸç§ç‰¹å¾çš„æ˜Ÿä½“ä¼šç›¸å½“å›°éš¾ï¼Œéœ€è¦ 169 å¤©çš„å·¥ä½œé‡ã€‚è€Œä½¿ç”¨ Atlas 900ï¼Œåªç”¨ 10 ç§’å°±å¯ä»¥ä»Ž 20 ä¸‡é¢—æ˜Ÿæ˜Ÿä¸­æ£€ç´¢å‡ºç›¸åº”ç‰¹å¾çš„æ˜Ÿä½“ã€‚
            
            æ®äº†è§£ï¼Œç›®å‰ Atlas 900 å·²ç»è¢«éƒ¨ç½²åœ¨äº†åŽä¸ºäº‘ä¸Šï¼Œå¹¶å°†ä»¥æžä¼˜æƒ çš„ä»·æ ¼å‘å…¨çƒç§‘ç ”æœºæž„å’Œå¤§å­¦å¼€æ”¾ã€‚
            
            
            
            
            
            ç‚¹ä¸ªåœ¨çœ‹å°‘ä¸ª bug ðŸ‘‡
            
            
            å¾®ä¿¡æ‰«ä¸€æ‰«
            å…³æ³¨è¯¥å…¬ä¼—å·`,
        max_summary_len: 200
    };

    const summaryRes = await getNewsSummary(body);
    console.log(summaryRes.summary);
};
const main2 = async () => {
    access_token = await getAccessToken();
    const body = {
        scene: 'talk',
        text: 'ä½ æ˜¯çŒªå—'
    };

    const res = await getEmotion(body);
    console.log(JSON.stringify(res.items[0]));
};
main2();
// axios.get('https://mp.weixin.qq.com/s/5TsP7OFEjMxiw4mLfggEpg').then(res => {
//     console.log(res.data);
// });
